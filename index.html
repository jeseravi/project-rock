<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
  <meta charset="UTF-8"/>
</head>
<body>

<input id="clickMe" type = "button" value = "Click to play!" onclick="game();" /> 

  <script>
    

//chooses a random selection for the computer

    function computerPlay() {


      //don't run if someone already has 5 points
      if(winCount>=5 || loseCount>=5){
        alert("The winner has already been declared! Refresh to page to play again!")
        return;
      }

      var options = [
      "Rock",
      "Paper",
      "Scissors"
      ]
      var computerSelection = options[Math.floor(Math.random() * options.length)];

      //print out what the computer chose
      let computerChoice = document.createElement("div");
      computerChoice.innerHTML = "Computer chose " + computerSelection;
      document.body.appendChild(computerChoice);


      return computerSelection.toLowerCase();




    }


  let winCount = 0;
  let loseCount = 0;

  function TheGame(playerSelection) {

      let computerSelection = computerPlay();

      let lowercaseplayerSelection = playerSelection.toLowerCase();

      if ((lowercaseplayerSelection == "rock") || (lowercaseplayerSelection == "paper") || (lowercaseplayerSelection == "scissors")) {
        } else {
        console.log("You made an invalid choice");
        return "Error";
      }

      if (lowercaseplayerSelection == "rock" && computerSelection == "paper") {
      lossCounter();      
      return "Sorry, you lost!";}
      else if  (lowercaseplayerSelection == "rock" && computerSelection == "scissors") {
      winCounter();
      return "You win!";}
      
      else if  (lowercaseplayerSelection == "rock" && computerSelection == "rock") {
      return "You Tied, Oof";}

      else if (lowercaseplayerSelection == "scissors" && computerSelection == "rock") {
      lossCounter();      
      return "Sorry, you lost!";}
      else if  (lowercaseplayerSelection == "scissors" && computerSelection == "paper") {
      winCounter();
      return "You win!";}
      else if  (lowercaseplayerSelection == "scissors" && computerSelection == "scissors") {
      return "You Tied, Oof";}

      else if (lowercaseplayerSelection == "paper" && computerSelection == "scissors") {
      lossCounter();      
      return "Sorry, you lost!";}
      else if  (lowercaseplayerSelection == "paper" && computerSelection == "rock") {
      winCounter();
      return "You win!";}
      else if  (lowercaseplayerSelection == "paper" && computerSelection == "paper") {
      return "You Tied, Oof";}

      

  }

function playRound(playerSelection) {

  let result = TheGame(playerSelection);
  console.log(result);
  
  let divResult = document.createElement("div");
  divResult.innerHTML = result;
  document.body.appendChild(divResult);
   
}


//function to tally loss scores to clean up code in theGame()
function lossCounter(){
  loseCount += 1; 
  let lossTally = document.createElement("div");
  lossTally.innerHTML = "Your score is " + winCount + " wins and " + loseCount + " losses";
  document.body.appendChild(lossTally);
  gameOver()

}

//function to tally win scores to clean up code in theGame()
function winCounter(){
      winCount += 1; 
      let runningTally = document.createElement("div");
      runningTally.innerHTML = "Your score is " + winCount + " wins and " + loseCount + " losses";
      document.body.appendChild(runningTally);
      gameOver()

}



//function to announce the winner whenever someone reaches 5 points
function gameOver(){

        if(winCount==5 && winCount>loseCount){
        let finishedGame = document.createElement("div");
        finishedGame.innerHTML = "Game Over! You were the first to 5 points";
        document.body.appendChild(finishedGame);
        }
        else if(loseCount==5 &&loseCount>winCount){
        let finishedGame = document.createElement("div");
        finishedGame.innerHTML = "Game Over! The computer was the first to 5 points";
        document.body.appendChild(finishedGame);  
        }

}



function game(){

  //hide the click to play button
  clickMe.style.display='none';

  //display instructions
  let instructions = document.createElement("div");
  instructions.innerHTML = "To play Rock Paper Scissors just click on one of the following. The first one to 5 points wins!";
  document.body.appendChild(instructions);


// removing logic that plays exactly five rounds
//   for (let i = 0; i<5; i++) {
//    let playerSelection = prompt("Choose rock paper or scissors");
//    let result = playRound(playerSelection);
//    console.log(result);





//Create three buttons, one for each selection. 



  let btnRock = document.createElement("button");
  btnRock.innerHTML = "Rock";
  document.body.appendChild(btnRock);

  let btnPaper = document.createElement("button");
  btnPaper.innerHTML = "Paper";
  document.body.appendChild(btnPaper);

  let btnScissors = document.createElement("button");
  btnScissors.innerHTML = "Scissors";
  document.body.appendChild(btnScissors);


//Add an event listener to the buttons that call your playRound function 
//.with the correct playerSelection every time a button is clicked. 
//(you can keep the console.logs for this step)




  btnRock.addEventListener("click",
    function(){

      playRound("Rock");
    
    });

  btnPaper.addEventListener("click",
    function(){
      
      playRound("Paper");
    
    });

  btnScissors.addEventListener("click",
    function(){
     
      playRound("Scissors");
    
    });


  

}




  </script>
</body>
</html>